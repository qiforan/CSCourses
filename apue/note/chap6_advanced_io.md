# 高级 I/O

系统调用可以分为两类：“低速”系统调用和其他。前者可能会使进程永远阻塞，包括：

- 某些文件类型的数据不存在，读操作不能完成。

- 数据不能被接受，写操作不能完成。

- 打开文件之前的某些操作不能完成，导致打开文件操作不能完成。

- 读加锁的文件读写。

- 某些 ioctl 操作。

- 某些进程通信函数。

非阻塞 I/O 操作使我们不被不能完成的操作阻塞，而是出错返回。对于一个操作符，设置 `O_NONBLOCK` 标志可以指定为非阻塞，具体地：

- 在调用 `open` 时，给 `oflag` 参数指定 `O_NONBLOCK` 标志

- 若已经打开，调用 `fcntl` 设置 `O_NONBLOCK` 标志



